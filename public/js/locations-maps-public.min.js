function tooltipBuild(d){var c=d.title,a=d.address,b=d.url;return'<div class="marker-infowindow"><div class="title">'+c+"</div>"+placeAddress(a)+'<div class="link"><a href="'+b+'" target="_blank" rel="noopener">View on Google Maps</a></div></div>'}function placeAddress(f){var a=f.address,e=f.city,c=f.state,b=f.zip,d=f.country;return'<div class="address"><p>'+a+"</p><p>"+e+" "+c+" "+b+"</p><p>"+d+"</p></div>"}function CustomMarker(b,a){this.latlng=b;this.setMap(a)}var map;var mapElement=jQuery(".map-container").attr("id");var postsURL="/wp-json/wp/v2/locations?per_page=100";var zoom=MAP_VARS.mapZoom||8;var icon=MAP_VARS.mapIcon;var hoverIcon=MAP_VARS.mapHoverIcon||"";var style=MAP_VARS.mapStyling;var single=typeof MAP_VARS.post_id?MAP_VARS.post_id:"no";var defaultIcon=MAP_VARS.mapIcon;var popup=MAP_VARS.mapPopup||"";var prev_infowindow=false;var label=1;var markers=[];var markerArray=[];var count;var items;var noInfoWindow=MAP_VARS.mapDisableInfowindow||"yes";var center;function initMap(){if(jQuery.isNumeric(single)){postsURL="/wp-json/wp/v2/locations/"+single}center=new google.maps.LatLng(MAP_VARS.mapCenterLat,MAP_VARS.mapCenterLng);map=new google.maps.Map(document.getElementById(mapElement),{zoom:parseInt(zoom),center:center,disableDefaultUI:true,streetViewControl:false,mapTypeControl:false,draggable:false,zoomControl:false,scrollwheel:false,disableDoubleClickZoom:true,mapTypeIds:["styledMap"]});jQuery.getJSON(style,function(c){var b=new google.maps.StyledMapType(c,{name:"Custom Map Styling"});map.mapTypes.set("styledMap",b);map.setMapTypeId("styledMap")});if(single==="no"){jQuery.ajax({url:postsURL,method:"GET",success:function(g){var b,e,j=1,h="",d="",f=new google.maps.LatLngBounds(),c=9999;g.forEach(function(s){var r=new google.maps.LatLng(s.map_fields._map_lat,s.map_fields._map_lng);f.extend(r);var o=new google.maps.Marker({position:r,map:map,icon:defaultIcon||icon});var q=s.map_fields._map_address[0]!==""?s.map_fields._map_address[0].replace(/\s/g,"+")+"+":"";var k=s.map_fields._map_city[0]!==""?s.map_fields._map_city[0].replace(/\s/g,"+")+"+":"";var p=s.map_fields._map_state[0]!==""?s.map_fields._map_state[0]+"+":"";var t=s.map_fields._map_zip[0]!==""?s.map_fields._map_zip[0]+"+":"";var i=q+k+p+t;var l={title:s.title.rendered||s.name||"",address:{address:s.map_fields._map_address,city:s.map_fields._map_city+","||"",state:s.map_fields._map_state||"",zip:s.map_fields._map_zip||""},url:"https://www.google.com/maps/search/?api=1&query="+i+"&query_place_id="+s.map_fields._map_placeID+">"};if(popup!==false){var n=tooltipBuild(l);var m=new google.maps.InfoWindow({content:n});google.maps.event.addListener(o,"click",(function(u,v){return function(){if(!jQuery.isEmptyObject(prev_infowindow)){prev_infowindow.close()}m=new google.maps.InfoWindow({content:n});prev_infowindow=m;m.open(map,u)}})(o,e))}if(hoverIcon.length){o.addListener("mouseover",function(){o.setIcon(MAP_VARS.hoverIcon)});o.addListener("mouseout",function(){o.setIcon(defaultIcon)});o.addListener("click",function(){o.setIcon(MAP_VARS.hoverIcon)})}o.setVisible(true);markers.push(o);o.setZIndex(google.maps.Marker.MAX_ZINDEX+1);if(s.id===29){o.setZIndex(9999999999)}google.maps.event.addListener(map,"click",function(){m.close()})})},error:function(d,b,c){console.log("error");console.log(d);console.log(b);console.log(c)}})}else{if(!isNaN(single)){var a=new google.maps.Marker({position:center,icon:icon});a.setMap(map)}}};