(function(g){let lat=g("[data-lat]");let lng=g("[data-lng]");let address=g("[data-address]");let address2=g("[data-address2]");let city=g("[data-city]");let state=g("[data-state]");let zip=g("[data-zip]");let country=g("[data-country]");let email=g("[data-email]");let phone=g("[data-phone]");let website=g("[data-website]");let placeID=g("[data-placeid]");let textLat=g("[data-lat_text]");let textLng=g("[data-lng_text]");function h(){textLat.val(lat.val());textLng.val(lng.val())}function d(){g("#get_geoloc").on("click",function(){let paramAddress={address:address.val(),address2:address2.val(),city:city.val(),state:state.val(),zip:zip.val(),country:country.val()};console.log(paramAddress);g("#map-loading").addClass("show");g(".map-row").addClass("loading");g(".map-field input, .map-field.disabled input").prop("readonly",true);g.ajax({url:"/wp-json/locations/v1/place/",method:"GET",data:{address:paramAddress},complete:function(){g("#map-loading").removeClass("show");g(".map-row").removeClass("loading");g(".map-field:not(.readonly) input").prop("readonly",false)},success:function(k){if(!k){return}let lat=parseFloat(k.lat);let lng=parseFloat(k.lng);placeID=k.place_id;console.log(k);document.getElementById("lm_meta[lat_text]").value=lat;document.getElementById("lm_meta[lng_text]").value=lng;document.getElementById("lm_meta[lat]").value=lat;document.getElementById("lm_meta[lng]").value=lng;document.getElementById("lm_meta[placeID]").value=placeID;let returnData={_ajax_nonce:MAP_ADMIN.nonce,action:"geo_cb",address:address.val()||"",address2:address2.val()||"",city:city.val()||"",state:state.val()||"",zip:zip.val()||"",country:country.val()||"",phone:phone.val()||"",website:website.val()||"",placeID:placeID||"",lat:lat||"",lng:lng||"",id:g("#get_geoloc").data("postid")}},error:function(k){alert("Stopping function to grab location. There has been an error!")}})})}function b(){g("#save_address").on("click",function(){let returnData={_ajax_nonce:MAP_ADMIN.nonce,action:"geo_cb",address:address.val()||"",address2:address2.val()||"",city:city.val()||"",state:state.val()||"",zip:zip.val()||"",lat:lat.val()||"",lng:lng.val()||"",email:email.val()||"",phone:phone.val()||"",website:website.val()||"",id:g("#get_geoloc").data("postid"),placeID:placeID.val()||""};console.log(returnData);g.post(MAP_ADMIN.adminURL,returnData,function(k){alert('Address saved. If you haven\'t already, click "Get Place" to get the Place Informtaion.')})})}function a(){g("#geo_reset").on("click",function(){if(!confirm("Are you sure you want to reset the geolocation?")){return}document.getElementById("lm_meta[lat_text]").value="";document.getElementById("lm_meta[lng_text]").value="";document.getElementById("lm_meta[lat]").value="";document.getElementById("lm_meta[lng]").value="";document.getElementById("lm_meta[placeID]").value="";let returnData={_ajax_nonce:MAP_ADMIN.nonce,action:"geo_cb",address:address.val()||"",address2:address2.val()||"",city:city.val()||"",state:state.val()||"",zip:zip.val()||"",lat:"",lng:"",phone:phone.val()||"",website:website.val()||"",id:g("#get_geoloc").data("postid")};g.post(MAP_ADMIN.adminURL,returnData,function(k){alert("Data Deleted!")})})}function c(k){for(let i=0;i<k.childNodes.length;i++){let e=k.childNodes[i];if(e.tagName){switch(e.tagName.toLowerCase()){case"input":switch(e.type){case"radio":case"checkbox":e.checked=false;break;case"button":case"submit":case"image":break;case"hidden":default:e.value="";break}break;case"select":e.selectedIndex=0;break;case"textarea":e.innerHTML="";break;default:c(e)}}}}function j(){g("#form-reset").on("click",function(){if(!confirm("Are you sure you want to reset the form? This is unreversable.")){return}c(document.getElementById("map-elements"));let returnData={_ajax_nonce:MAP_ADMIN.nonce,action:"geo_cb",address:"",address2:"",city:"",state:"",zip:"",lat:"",lng:"",phone:"",website:"",id:g("#get_geoloc").data("postid")};g.post(MAP_ADMIN.adminURL,returnData,function(k){alert("Data Reset! Please make sure to save the post to update all the address fields..")})})}function f(){g("#get_geoloc").on("click",function(){let address=g("[data-address]").val()||"";let address2=g("[data-address2]").val()||"";let city=g("[data-city]").val()||"";let state=g("[data-state]").val()||"";let zip=g("[data-zip]").val()||"";let country=g("[data-country]").val()||"";let phone=g("[data-phone]").val()||"";let website=g("[data-website]").val()||"";address="12000 E 56th Avenue";city="Denver";state="Colorado";zip="80239";let paramAddress={address:address,address2:address2,city:city,state:state,zip:zip,country:country};g("#map-loading").addClass("show");g(".map-row").addClass("loading");g(".map-field input, .map-field.disabled input").prop("readonly",true);g.ajax({url:"/wp-json/locations/v1/place/",method:"GET",data:{address:paramAddress},complete:function(){g("#map-loading").removeClass("show");g(".map-row").removeClass("loading");g(".map-field:not(.readonly) input").prop("readonly",false)},success:function(k){console.log(k)},error:function(k){console.log(k)}})})}if(g("body").hasClass("post-type-locations")){h();d();b();a();j()}})(jQuery);